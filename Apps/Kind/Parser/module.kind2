use Data.String.Parser as Parser
use Apps.Kind.Parser as KParser
use Apps.Kind.SyntaxTree.Sugared as AST

//! Parses a Kind Module, a collection of top levels plus some alias definitions used inside that module
KParser/module : KParser/ AST/Module {
  do Parser/ {
    ask decls = Parser/many (KParser/skipping KParser/declaration)
    KParser/skip
    Parser/eof
    return (Data.List.foldl
      (AST/Module.empty)
      (d => m => AST/Module.add_declaration d m)
      decls
    )
  }
}
